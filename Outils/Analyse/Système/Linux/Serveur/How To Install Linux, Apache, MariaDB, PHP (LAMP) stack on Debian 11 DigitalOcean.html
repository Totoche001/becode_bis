<!DOCTYPE html>
<html dir="ltr" class=" kibuofkp" lang="en"><head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8"><meta charset="utf-8"><link rel="apple-touch-icon" sizes="180x180" href="https://www.digitalocean.com/_next/static/media/apple-touch-icon.d7edaa01.png"><link rel="icon" sizes="192x192" href="https://www.digitalocean.com/_next/static/media/android-chrome-192x192.f09059d8.png"><link rel="icon" sizes="512x512" href="https://www.digitalocean.com/_next/static/media/android-chrome-512x512.5f2e6221.png"><link rel="icon" type="image/png" sizes="32x32" href="https://www.digitalocean.com/_next/static/media/favicon-32x32.b7ef9ede.png"><link rel="icon" type="image/png" sizes="16x16" href="https://www.digitalocean.com/_next/static/media/favicon-16x16.71c34517.png"><link rel="icon" type="image/x-icon" href="https://www.digitalocean.com/_next/static/media/favicon.594d6067.ico"><meta name="viewport" content="minimum-scale=1, initial-scale=1, width=device-width, shrink-to-fit=no"><meta name="twitter:card" content="summary"><meta property="og:type" content="website"><title>How To Install Linux, Apache, MariaDB, PHP (LAMP) stack on Debian 11  | DigitalOcean</title><meta name="description" content="A “LAMP” stack is a group of open source software that is typically installed together to enable a server to host dynamic websites and web apps. This term is… "><meta name="twitter:title" content="How To Install Linux, Apache, MariaDB, PHP (LAMP) stack on Debian 11  | DigitalOcean"><meta name="twitter:description" content="A “LAMP” stack is a group of open source software that is typically installed together to enable a server to host dynamic websites and web apps. This term is… "><meta name="twitter:image" content="https://community-cdn-digitalocean-com.global.ssl.fastly.net/4NFVQfBfipENaXNcxRDGKi3b"><meta name="og:title" content="How To Install Linux, Apache, MariaDB, PHP (LAMP) stack on Debian 11  | DigitalOcean"><meta name="og:description" content="A “LAMP” stack is a group of open source software that is typically installed together to enable a server to host dynamic websites and web apps. This term is… "><meta name="og:image" content="https://community-cdn-digitalocean-com.global.ssl.fastly.net/4NFVQfBfipENaXNcxRDGKi3b"><meta property="og:type" content="article"><link rel="canonical" href="https://www.digitalocean.com/community/tutorials/how-to-install-linux-apache-mariadb-php-lamp-stack-on-debian-11"><link rel="alternate" hreflang="en" href="https://www.digitalocean.com/community/tutorials/how-to-install-linux-apache-mariadb-php-lamp-stack-on-debian-11"><link rel="alternate" hreflang="x-default" href="https://www.digitalocean.com/community/tutorials/how-to-install-linux-apache-mariadb-php-lamp-stack-on-debian-11"><meta charset="utf-8"><meta name="next-head-count" content="23"><link rel="preconnect" href="https://fonts.googleapis.com/"><link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin="true"><link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin=""><link rel="stylesheet" href="How%20To%20Install%20Linux,%20Apache,%20MariaDB,%20PHP%20(LAMP)%20stack%20on%20Debian%2011%20DigitalOcean_fichiers/001010647c95ed21.css" data-n-p=""><noscript data-n-css=""></noscript></head><body><div id="__next" data-reactroot=""><div class="NotificationsStyles__NotificationsContainer-sc-zw5s6s-0 hUfVTy"></div><div class="LayoutCommunityStyles__StyledLayout-sc-1t77shh-0 fKgnHB"><div class="QuestionAndTutorialOuterContainerStyles__StyledOuterContainer-sc-l9p98c-0 bxGhQv"><div class="ContainerStyles__StyledContainer-sc-1vejnbq-0 hUMvDg"><div class="TutorialTemplateStyles__StyledRecordHeaderContainer-sc-1gdp4d7-0 dSYWSY"><h4 class="HeadingStyles__StyledH4-sc-kkk1io-3 lazoHD TutorialTemplate___StyledHeading-sc-dk9clm-1 iTrWGn">// Tutorial //</h4><h1 class="HeadingStyles__StyledH1-sc-kkk1io-0 inLkjD TutorialTemplate___StyledHeading2-sc-dk9clm-2 eZLyNu">How To Install Linux, Apache, MariaDB, PHP (LAMP) stack on Debian 11</h1><div class="TutorialTemplateStyles__StyledRecordMetaContainer-sc-1gdp4d7-2 ewEAKO"><div class="TutorialTemplateStyles__StyledRecordMetaItemDate-sc-1gdp4d7-7 RKhHr">Published on August 15, 2022 · Updated on August 15, 2022</div><ul class="TutorialTemplateStyles__StyledRecordMetaList-sc-1gdp4d7-3 jVUaVi"><li class="TutorialTemplateStyles__StyledRecordMetaItem-sc-1gdp4d7-4 pHSJJ"><a title="Apache" href="https://www.digitalocean.com/community/tags/apache" class="TagStyles__StyledTag-sc-1u5lkpz-0 ggTtOb">Apache</a></li><li class="TutorialTemplateStyles__StyledRecordMetaItem-sc-1gdp4d7-4 pHSJJ"><a title="Debian 11" href="https://www.digitalocean.com/community/tags/debian-11" class="TagStyles__StyledTag-sc-1u5lkpz-0 ggTtOb">Debian 11</a></li><li class="TutorialTemplateStyles__StyledRecordMetaItem-sc-1gdp4d7-4 pHSJJ"><a title="LAMP Stack" href="https://www.digitalocean.com/community/tags/lamp-stack" class="TagStyles__StyledTag-sc-1u5lkpz-0 ggTtOb">LAMP Stack</a></li></ul><div class="TutorialTemplateStyles__StyledAvatarContainer-sc-1gdp4d7-10 rrjgm"></div><div class="TutorialTemplateStyles__StyledAuthorDateContainer-sc-1gdp4d7-5 fZBTl"><div class="TutorialTemplateStyles__StyledRecordMetaItemAuthor-sc-1gdp4d7-6 bDENzf">By<!-- --> <a size="16" href="https://www.digitalocean.com/community/users/mdrake" class="TutorialTemplateStyles__StyledRecordMetaItemAuthorHighlight-sc-1gdp4d7-9 kILuHx">Mark Drake</a>, <a size="16" href="https://www.digitalocean.com/community/users/erikaheidi" class="TutorialTemplateStyles__StyledRecordMetaItemAuthorHighlight-sc-1gdp4d7-9 kILuHx">Erika Heidi</a> and <a size="16" href="https://www.digitalocean.com/community/users/jhorcasitas" class="TutorialTemplateStyles__StyledRecordMetaItemAuthorHighlight-sc-1gdp4d7-9 kILuHx">Jeanelle Horcasitas</a></div></div></div><div class="TutorialTemplateStyles__StyledRecordVersionsContainer-sc-1gdp4d7-25 ttepV"><div class="TutorialTemplateStyles__StyledRecordVersionsTitle-sc-1gdp4d7-26 jBDcQB"><h5 class="HeadingStyles__StyledH5-sc-kkk1io-4 fFoMrJ TutorialTemplateStyles__StyledVersionHeading-sc-1gdp4d7-27 ecgdVD">Not using<!-- --> <!-- -->Debian<!-- --> <!-- -->11<!-- -->?<small class="TutorialTemplateStyles__StyledVersionSubtitle-sc-1gdp4d7-28 laiZMo">Choose a different version or distribution.</small></h5></div><div class=""><div class=" css-b62m3t-container" id="0993-69a7-7f2d-f225-edd5-2bf2-f810-2dec"><span id="react-select-51-live-region" class="css-7pg0cj-a11yText"><span id="aria-selection">option Debian 11, selected.</span><span id="aria-context">  Select is focused ,type to refine list, press Down to open the menu, </span></span><span aria-live="polite" aria-atomic="false" aria-relevant="additions text" class="css-7pg0cj-a11yText"></span><div class="react-select__control react-select__control--is-focused css-rq8njf-control"><div class="react-select__value-container react-select__value-container--has-value css-1d8n9bt"><div class="react-select__single-value css-tshgh-singleValue">Debian 11</div><div class="react-select__input-container css-ackcql" data-value=""><input type="text" class="react-select__input" style="color: inherit; background: 0px center; opacity: 0; width: 100%; grid-area: 1 / 2; font: inherit; min-width: 2px; border: 0px none; margin: 0px; outline: 0px; padding: 0px;" autocapitalize="none" autocomplete="off" autocorrect="off" id="react-select-51-input" spellcheck="false" tabindex="0" aria-autocomplete="list" aria-expanded="false" aria-haspopup="true" role="combobox" aria-describedby="react-select-2-live-region"></div></div><div class="react-select__indicators css-1wy0on6"><div class="react-select__indicator react-select__dropdown-indicator css-1wbal5z-indicatorContainer" aria-hidden="true"><svg height="20" width="20" viewBox="0 0 20 20" aria-hidden="true" focusable="false" class="css-8mmkcg"><path d="M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747 3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0 1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502 0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0 0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z"></path></svg></div></div></div></div><input tabindex="-1" autocomplete="off" value="[object Object]" class="DropdownStyles__StyledTriggerInput-sc-l46zev-0 jxLtzF"></div></div></div><div class="Markdown_markdown__7Dog_"><h3 id="introduction">Introduction</h3>
<p>A “LAMP” stack is a group of open-source software that is typically 
installed together to enable a server to host dynamic websites and web 
apps. This term is an acronym that represents the <strong>L</strong>inux operating system, with the <strong>A</strong>pache web server. The site data is stored in a <strong>M</strong>ariaDB database, and dynamic content is processed by <strong>P</strong>HP.</p>
<p>Although this software stack typically includes <strong>MySQL</strong> as the database management system, some Linux distributions — including Debian — use <a href="https://mariadb.org/">MariaDB</a> as a drop-in replacement for MySQL.</p>
<p>In this guide, you will install a LAMP stack on a Debian 11 server, using MariaDB as the database management system.</p>
<h2 id="prerequisites">Prerequisites</h2>
<p>To follow this tutorial, you will need a Debian 11 server with a non-<strong>root</strong> <code>sudo</code>-enabled user account and a basic firewall. This can be configured using our <a href="https://www.digitalocean.com/community/tutorials/initial-server-setup-with-debian-11">initial server setup guide for Debian 11</a>.</p>
<h2 id="step-1-installing-apache-and-updating-the-firewall">Step 1 — Installing Apache and Updating the Firewall</h2>
<p>The Apache web server is among the most popular web servers in the 
world. It’s well documented, has an active community of users, and has 
been in wide use for much of the history of the web, which makes it a 
great choice for hosting a website.</p>
<p>Start by updating the package manager cache. If this is the first time you’re using <code>sudo</code>
 within this session, you’ll be prompted to provide your user’s password
 to confirm you have the right privileges to manage system packages with
 <code>apt</code>:</p>
<div class="code-toolbar"><pre class="prefixed command language-bash"><code><ol><li data-prefix="$"><span class="token function">sudo</span> <span class="token function">apt</span> update
</li></ol>
</code></pre><div class="toolbar"><div class="toolbar-item"><button>Copy</button></div></div></div>
<p>Then, install Apache with the following:</p>
<div class="code-toolbar"><pre class="prefixed command language-bash"><code><ol><li data-prefix="$"><span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> apache2
</li></ol>
</code></pre><div class="toolbar"><div class="toolbar-item"><button>Copy</button></div></div></div>
<p>This command will prompt you to confirm Apache’s installation. Confirm by writing <code>Y</code>, then <code>ENTER</code>.
Once the installation is complete, you need to adjust your firewall 
settings. Assuming that you followed the initial server setup 
instructions to <a href="https://www.digitalocean.com/community/tutorials/initial-server-setup-with-debian-11#step-4-setting-up-a-basic-firewall">install and enable the UFW firewall</a>, make sure that your firewall allows HTTP and HTTPS traffic.</p>
<p>On Debian 11, UFW comes loaded with app profiles that you can use to 
adjust your firewall settings. View the full list of application 
profiles by running:</p>
<div class="code-toolbar"><pre class="prefixed command language-bash"><code><ol><li data-prefix="$"><span class="token function">sudo</span> ufw app list
</li></ol>
</code></pre><div class="toolbar"><div class="toolbar-item"><button>Copy</button></div></div></div>
<p>The <code>WWW</code> profiles listed are used to manage ports used by web servers:</p>
<pre><code><div class="secondary-code-label" title="Output">Output</div>Available applications:
. . .
  WWW
  WWW Cache
  WWW Full
  WWW Secure
. . .
</code></pre>
<p>If you inspect the <code>WWW Full</code> profile with <code>ufw app info</code>, your output will show that it enables traffic to ports <code>80</code> and <code>443</code>:</p>
<div class="code-toolbar"><pre class="prefixed command language-bash"><code><ol><li data-prefix="$"><span class="token function">sudo</span> ufw app info <span class="token string">"WWW Full"</span>
</li></ol>
</code></pre><div class="toolbar"><div class="toolbar-item"><button>Copy</button></div></div></div>
<pre><code><div class="secondary-code-label" title="Output">Output</div>Profile: WWW Full
Title: Web Server (HTTP,HTTPS)
Description: Web Server (HTTP,HTTPS)

Ports:
  <mark>80</mark>,<mark>443/tcp</mark>
</code></pre>
<p>Next, allow incoming HTTP and HTTPS traffic for this profile:</p>
<div class="code-toolbar"><pre class="prefixed command language-bash"><code><ol><li data-prefix="$"><span class="token function">sudo</span> ufw allow <span class="token keyword">in</span> <span class="token string">"WWW Full"</span>
</li></ol>
</code></pre><div class="toolbar"><div class="toolbar-item"><button>Copy</button></div></div></div>
<p>You can verify that everything went as planned by visiting your server’s public IP address in your web browser:</p>
<pre><code>http://<mark>your_server_ip</mark>
</code></pre>
<p>This will return the default Debian 11 Apache web page, which is there for informational and testing purposes:</p>
<p><img src="How%20To%20Install%20Linux,%20Apache,%20MariaDB,%20PHP%20(LAMP)%20stack%20on%20Debian%2011%20DigitalOcean_fichiers/small_apache_default_debian9.png" alt="Debian 11 Apache default"></p>
<p>If your browser returns this page, then your web server is now correctly installed and accessible through your firewall.</p>
<h3 id="how-to-find-your-server-s-public-ip-address">How To Find your Server’s Public IP Address</h3>
<p>If you do not know what your server’s public IP address is, there are
 a number of ways you can find it. Usually, this is the address you use 
to connect to your server through SSH.</p>
<p>There are a few different ways to do this from the command line. First, you could use the <code>iproute2</code> tools to get your IP address by running::</p>
<div class="code-toolbar"><pre class="prefixed command language-bash"><code><ol><li data-prefix="$"><span class="token function">ip</span> addr show eth0 <span class="token operator">|</span> <span class="token function">grep</span> inet <span class="token operator">|</span> <span class="token function">awk</span> <span class="token string">'{ print $2; }'</span> <span class="token operator">|</span> <span class="token function">sed</span> <span class="token string">'s/\/.*$//'</span>
</li></ol>
</code></pre><div class="toolbar"><div class="toolbar-item"><button>Copy</button></div></div></div>
<p>This will return two or three lines back. They are all correct 
addresses, but your computer may only be able to use one of them, so 
feel free to try each one.</p>
<p>An alternative method is to use the <code>curl</code> utility to 
contact an outside party to tell you how it sees your server. You can 
run the following command and ask a specific server what your IP address
 is:</p>
<div class="code-toolbar"><pre class="prefixed command language-bash"><code><ol><li data-prefix="$"><span class="token function">curl</span> http://icanhazip.com
</li></ol>
</code></pre><div class="toolbar"><div class="toolbar-item"><button>Copy</button></div></div></div>
<p>Whichever method you prefer, write your IP address into the web 
browser to verify that your server is running the default Apache page.</p>
<h2 id="step-2-installing-mariadb">Step 2 — Installing MariaDB</h2>
<p>Now that you have a web server up and running, you need to install 
the database system to be able to store and manage data for your site.</p>
<p>In Debian 11, the metapackage <code>mysql-server</code>, which was traditionally used to install the MySQL server, was replaced by <code>default-mysql-server</code>. This metapackage references <a href="https://mariadb.org/">MariaDB</a>,
 a community fork of the original MySQL server by Oracle, and it’s 
currently the default MySQL-compatible database server available on 
Debian-based package manager repositories.</p>
<p>For longer-term compatibility, however, it’s recommended that instead
 of using the metapackage, you install MariaDB using the program’s 
actual package, <code>mariadb-server</code>.</p>
<p>To install the MariaDB software, run:</p>
<div class="code-toolbar"><pre class="prefixed command language-bash"><code><ol><li data-prefix="$"><span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> mariadb-server
</li></ol>
</code></pre><div class="toolbar"><div class="toolbar-item"><button>Copy</button></div></div></div>
<p>When the installation is finished, it’s recommended that you run a 
security script that comes pre-installed with MariaDB. This script will 
remove some insecure default settings and lock down access to your 
database system. Start the interactive script by running:</p>
<div class="code-toolbar"><pre class="prefixed command language-bash"><code><ol><li data-prefix="$"><span class="token function">sudo</span> mysql_secure_installation
</li></ol>
</code></pre><div class="toolbar"><div class="toolbar-item"><button>Copy</button></div></div></div>
<p>This script will take you through a series of prompts where you can 
make some changes to your MariaDB setup. The first prompt will ask you 
to enter the current <strong>database root</strong> password. This is not to be confused with the <strong>system root</strong>. The <strong>database root</strong>
 user is an administrative user with full privileges over the database 
system. Since you just installed MariaDB and haven’t made any 
configuration changes yet, this password will be blank, so press <code>ENTER</code> at the prompt.</p>
<p>The next prompt asks whether you’d like to set up a <strong>database root</strong> password. Since MariaDB uses a special authentication method for the <strong>root</strong> user that is typically safer than using a password, you don’t need to set this now. Press <code>N</code> and then <code>ENTER</code>.</p>
<p>From there, you can press <code>Y</code> and then <code>ENTER</code> 
to accept the defaults for all the subsequent questions. This will 
remove anonymous users and the test database, disable remote <strong>root</strong> login, and load these new rules so that MariaDB immediately respects the changes you have made.</p>
<p>When you’re finished, log in to the MariaDB console:</p>
<div class="code-toolbar"><pre class="prefixed command language-bash"><code><ol><li data-prefix="$"><span class="token function">sudo</span> mariadb
</li></ol>
</code></pre><div class="toolbar"><div class="toolbar-item"><button>Copy</button></div></div></div>
<p>This will connect to the MariaDB server as the administrative database user <strong>root</strong>, which is inferred by the use of <code>sudo</code> when running this command. You should receive output like the following:</p>
<pre><code><div class="secondary-code-label" title="Output">Output</div>Welcome to the MariaDB monitor.  Commands end with ; or \g.
Your MariaDB connection id is 41
Server version: 10.5.15-MariaDB-0+deb11u1 Debian 11

Copyright (c) 2000, 2018, Oracle, MariaDB Corporation Ab and others.

Type 'help;' or '\h' for help. Type '\c' to clear the current input statement.

MariaDB [(none)]&gt;
</code></pre>
<p>Notice that you didn’t need to provide a password to connect as the <strong>root</strong> user. That’s because the default authentication method for the administrative MariaDB user is <code>unix_socket</code> instead of <code>password</code>.
 Even though this might seem like a security concern at first, it makes 
the database server more secure because the only users allowed to log in
 as the <strong>root</strong> MariaDB user are the system users with <code>sudo</code>
 privileges connecting from the console, or through an application 
running with the same privileges. In practical terms, that means you 
won’t be able to use the administrative database <strong>root</strong> user to connect from your PHP application.</p>
<p>For increased security, it’s best to have dedicated user accounts 
with less expansive privileges set up for every database, especially if 
you plan on having multiple databases hosted on your server.</p>
<p>You can exit the MariaDB console with the following:</p>
<div class="code-toolbar"><pre class="prefixed custom_prefix language-bash"><code><ol><li data-prefix="MariaDB [(none)]&gt;"><span class="token builtin class-name">exit</span>
</li></ol>
</code></pre><div class="toolbar"><div class="toolbar-item"><button>Copy</button></div></div></div>
<p>Your MariaDB server is now installed and secured. Next, you will install PHP, the final component in the LAMP stack.</p>
<h2 id="step-3-installing-php">Step 3 — Installing PHP</h2>
<p>You have Apache installed to serve your content and MariaDB installed
 to store and manage your data. PHP is the component of your setup that 
will process code to display dynamic content to the final user. It can 
run scripts, connect to your MariaDB databases to get information, and 
hand the processed content over to your web server to display.</p>
<p>In addition to the <code>php</code> package, you will need <code>php-mysql</code>, a PHP module that allows PHP to communicate with MySQL-based database, such as MariaDB. You will also need <code>libapache2-mod-php</code> to enable Apache to handle PHP files. Core PHP packages will automatically be installed as dependencies.</p>
<p>To install these packages, run the following command:</p>
<div class="code-toolbar"><pre class="prefixed command language-bash"><code><ol><li data-prefix="$"><span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> php libapache2-mod-php php-mysql
</li></ol>
</code></pre><div class="toolbar"><div class="toolbar-item"><button>Copy</button></div></div></div>
<p>Once installation is complete, you can verify your PHP version with the following command:</p>
<div class="code-toolbar"><pre class="prefixed command language-bash"><code><ol><li data-prefix="$">php -v
</li></ol>
</code></pre><div class="toolbar"><div class="toolbar-item"><button>Copy</button></div></div></div>
<pre><code><div class="secondary-code-label" title="Output">Output</div>PHP 7.4.30 (cli) (built: Jul  7 2022 15:51:43) ( NTS )
Copyright (c) The PHP Group
Zend Engine v3.4.0, Copyright (c) Zend Technologies
    with Zend OPcache v7.4.30, Copyright (c), by Zend Technologies
</code></pre>
<p>At this point, your LAMP stack is fully operational, but before 
testing your setup with a PHP script, it’s best to set up a proper <a href="https://httpd.apache.org/docs/current/vhosts/">Apache Virtual Host</a> to hold your website’s files and folders.</p>
<h2 id="step-4-creating-a-virtual-host-for-your-website">Step 4 — Creating a Virtual Host for your Website</h2>
<p>When using the Apache web server, you can create <em>virtual hosts</em>
 (similar to server blocks in Nginx) to encapsulate configuration 
details and host more than one domain from a single server. In this 
guide, we’ll set up a domain called <strong>your_domain</strong>, but you should <strong>replace this with your own domain name</strong>.</p>
<div class="callout note">
<p><strong>Note:</strong> In case you are using DigitalOcean as DNS hosting provider, check out our <a href="https://www.digitalocean.com/docs/networking/dns/how-to/manage-records/#a-records">product documentation</a> for detailed instructions on how to set up a new domain name and point it to your server.</p>
</div>
<p>By default, Apache serves its content from a directory located at <code>/var/www/html</code>, using the configuration contained in <code>/etc/apache2/sites-available/000-default.conf</code>. Instead of modifying the default website configuration file <code>/var/www/html</code>,
 you are going to create a new virtual host for testing your PHP 
environment. Virtual hosts enable you to keep multiple websites hosted 
on a single Apache server. You will also create a directory structure 
within <code>/var/www</code> for the <strong>your_domain</strong> site, leaving <code>/var/www/html</code> in place as the default directory to be served if a client request doesn’t match any other sites.</p>
<p>Begin by creating the root web directory for <strong>your_domain</strong> as follows:</p>
<div class="code-toolbar"><pre class="prefixed command language-bash"><code><ol><li data-prefix="$"><span class="token function">sudo</span> <span class="token function">mkdir</span> /var/www/<mark>your_domain</mark>
</li></ol>
</code></pre><div class="toolbar"><div class="toolbar-item"><button>Copy</button></div></div></div>
<p>Next, assign ownership of the directory with the <code>$USER</code> environment variable, which will reference your current system user:</p>
<div class="code-toolbar"><pre class="prefixed command language-bash"><code><ol><li data-prefix="$"><span class="token function">sudo</span> <span class="token function">chown</span> -R <span class="token environment constant">$USER</span><span class="token builtin class-name">:</span><span class="token environment constant">$USER</span> /var/www/<mark>your_domain</mark>
</li></ol>
</code></pre><div class="toolbar"><div class="toolbar-item"><button>Copy</button></div></div></div>
<p>Then, open a new configuration file in Apache’s <code>sites-available</code> directory using your preferred command-line editor. Here, we’ll use <code>nano</code>:</p>
<div class="code-toolbar"><pre class="prefixed command language-bash"><code><ol><li data-prefix="$"><span class="token function">sudo</span> <span class="token function">nano</span> /etc/apache2/sites-available/<mark>your_domain</mark>.conf
</li></ol>
</code></pre><div class="toolbar"><div class="toolbar-item"><button>Copy</button></div></div></div>
<p>This will create a new blank file. Add in the following bare-bones configuration with your own domain name:</p>
<div class="code-label" title="/etc/apache2/sites-available/your_domain">/etc/apache2/sites-available/your_domain</div>
<pre><code>&lt;VirtualHost *:80&gt;
    ServerName <mark>your_domain</mark>
    ServerAlias www.<mark>your_domain</mark> 
    ServerAdmin webmaster@localhost
    DocumentRoot /var/www/<mark>your_domain</mark>
    ErrorLog ${APACHE_LOG_DIR}/error.log
    CustomLog ${APACHE_LOG_DIR}/access.log combined
&lt;/VirtualHost&gt;
</code></pre>
<p>Save and close the file when you’re done. If you’re using <code>nano</code>, you can do this by pressing <code>CTRL + X</code>, then <code>Y</code> and <code>ENTER</code>.</p>
<p>With this <code>VirtualHost</code> configuration, you’re telling Apache to serve <code><mark>your_domain</mark></code> using <code>/var/www/<mark>your_domain</mark></code> as the web root directory. If you’d like to test Apache without a domain name, you can remove or comment out the options <code>ServerName</code> and <code>ServerAlias</code> by adding a pound sign (<code>#</code>) to the beginning of each option’s lines.</p>
<p>Now, use <code>a2ensite</code> to enable this virtual host:</p>
<div class="code-toolbar"><pre class="prefixed command language-bash"><code><ol><li data-prefix="$"><span class="token function">sudo</span> a2ensite <mark>your_domain</mark>
</li></ol>
</code></pre><div class="toolbar"><div class="toolbar-item"><button>Copy</button></div></div></div>
<p>You might want to disable the default website that comes installed 
with Apache. This is required if you’re not using a custom domain name, 
because in this case Apache’s default configuration would override your 
virtual host. To disable Apache’s default website, run:</p>
<div class="code-toolbar"><pre class="prefixed command language-bash"><code><ol><li data-prefix="$"><span class="token function">sudo</span> a2dissite 000-default
</li></ol>
</code></pre><div class="toolbar"><div class="toolbar-item"><button>Copy</button></div></div></div>
<p>To make sure your configuration file doesn’t contain syntax errors, run the following command:</p>
<div class="code-toolbar"><pre class="prefixed command language-bash"><code><ol><li data-prefix="$"><span class="token function">sudo</span> apache2ctl configtest
</li></ol>
</code></pre><div class="toolbar"><div class="toolbar-item"><button>Copy</button></div></div></div>
<p>Finally, reload Apache so these changes take effect:</p>
<div class="code-toolbar"><pre class="prefixed command language-bash"><code><ol><li data-prefix="$"><span class="token function">sudo</span> systemctl reload apache2
</li></ol>
</code></pre><div class="toolbar"><div class="toolbar-item"><button>Copy</button></div></div></div>
<p>Next, you will create a PHP script to test that PHP is correctly installed and configured on your server.</p>
<h2 id="step-5-testing-php-processing-on-your-web-server">Step 5 — Testing PHP Processing on your Web Server</h2>
<p>Now that you have a custom location to host your website’s files and 
folders, create a PHP test script to confirm that Apache is able to 
handle and process requests for PHP files.</p>
<p>Begin by creating a new file named <code>info.php</code> inside your custom web root folder:</p>
<div class="code-toolbar"><pre class="prefixed command language-bash"><code><ol><li data-prefix="$"><span class="token function">nano</span> /var/www/<mark>your_domain</mark>/info.php
</li></ol>
</code></pre><div class="toolbar"><div class="toolbar-item"><button>Copy</button></div></div></div>
<p>This will open a blank file. Add the following text, which is valid PHP code, inside the file:</p>
<div class="code-label" title="/var/www/your_domain/info.php">/var/www/your_domain/info.php</div>
<pre><code>&lt;?php
phpinfo();
</code></pre>
<p>When you are finished, save and close the file.</p>
<p>To test the script, go to your web browser and access your server’s 
domain name or IP address, followed by the script name, which in this 
case is <code>info.php</code>:</p>
<pre><code>http://<mark>your_domain</mark>/info.php
</code></pre>
<p>Here is an example of the default PHP web page:</p>
<p><img src="How%20To%20Install%20Linux,%20Apache,%20MariaDB,%20PHP%20(LAMP)%20stack%20on%20Debian%2011%20DigitalOcean_fichiers/phpinfo-debian11-lamp.PNG" alt="Debian 11 default PHP info"></p>
<p>This page provides information about your server from the perspective
 of PHP. It is useful for debugging and ensuring that your settings are 
being applied correctly.</p>
<p>If you can see this page in your browser, then your PHP installation is working as expected.</p>
<p>After checking the relevant information about your PHP server through
 that page, it’s best to remove the file you created as it contains 
sensitive information about your PHP environment and your Debian server.
 Use <code>rm</code> to do so:</p>
<div class="code-toolbar"><pre class="prefixed command language-bash"><code><ol><li data-prefix="$"><span class="token function">sudo</span> <span class="token function">rm</span> /var/www/<mark>your_domain</mark>/info.php
</li></ol>
</code></pre><div class="toolbar"><div class="toolbar-item"><button>Copy</button></div></div></div>
<p>You can always recreate this page if you need to access the information again later.</p>
<h2 id="step-6-testing-database-connection-from-php-optional">Step 6 — Testing Database Connection from PHP (Optional)</h2>
<p>If you want to test whether PHP is able to connect to MariaDB and 
execute database queries, you can create a test table with test data and
 query for its contents from a PHP script. Before you do that, you need 
to create a test database and a new MariaDB user properly configured to 
access it.</p>
<p>Create a database named <strong>example_database</strong> and a user named <strong>example_user</strong>. You can replace these names with different values.</p>
<p>First, connect to the MariaDB console using the <strong>root</strong> account:</p>
<div class="code-toolbar"><pre class="prefixed command language-bash"><code><ol><li data-prefix="$"><span class="token function">sudo</span> mariadb
</li></ol>
</code></pre><div class="toolbar"><div class="toolbar-item"><button>Copy</button></div></div></div>
<p>To create a new database, run the following command from your MariaDB console:</p>
<div class="code-toolbar"><pre class="prefixed custom_prefix language-bash"><code><ol><li data-prefix="MariaDB [(none)]&gt;">CREATE DATABASE <mark>example_database</mark><span class="token punctuation">;</span>
</li></ol>
</code></pre><div class="toolbar"><div class="toolbar-item"><button>Copy</button></div></div></div>
<p>Now create a new user and grant them full privileges on the custom database you’ve created.</p>
<p>The following command creates a new user named <code><mark>example_user</mark></code> that authenticates with a password. We’re defining this user’s password as <code><mark>password</mark></code>, but you should replace this value with a secure password of your own choosing:</p>
<div class="code-toolbar"><pre class="prefixed custom_prefix language-bash"><code><ol><li data-prefix="MariaDB [(none)]&gt;">CREATE <span class="token environment constant">USER</span> <span class="token string">'<mark>example_user</mark>'</span>@<span class="token string">'%'</span> IDENTIFIED BY <span class="token string">'<mark>password</mark>'</span><span class="token punctuation">;</span>
</li></ol>
</code></pre><div class="toolbar"><div class="toolbar-item"><button>Copy</button></div></div></div>
<p>Next, give this user permission over the <code>example_database</code> database:</p>
<div class="code-toolbar"><pre class="prefixed custom_prefix language-bash"><code><ol><li data-prefix="MariaDB [(none)]&gt;">GRANT ALL ON <mark>example_database</mark>.* TO <span class="token string">'<mark>example_user</mark>'</span>@<span class="token string">'%'</span><span class="token punctuation">;</span>
</li></ol>
</code></pre><div class="toolbar"><div class="toolbar-item"><button>Copy</button></div></div></div>
<p>This will give the <strong>example_user</strong> user full privileges over the <strong>example_database</strong> database, while preventing this user from creating or modifying other databases on your server.</p>
<p>Next, flush the privileges to ensure that they are saved and available in the current session:</p>
<div class="code-toolbar"><pre class="prefixed custom_prefix language-bash"><code><ol><li data-prefix="MariaDB [(none)]&gt;">FLUSH PRIVILEGES<span class="token punctuation">;</span>
</li></ol>
</code></pre><div class="toolbar"><div class="toolbar-item"><button>Copy</button></div></div></div>
<p>Following this, exit the MariaDB shell:</p>
<div class="code-toolbar"><pre class="prefixed custom_prefix language-bash"><code><ol><li data-prefix="MariaDB [(none)]&gt;"><span class="token builtin class-name">exit</span>
</li></ol>
</code></pre><div class="toolbar"><div class="toolbar-item"><button>Copy</button></div></div></div>
<p>You can test if the new user has the proper permissions by logging in
 to the MariaDB console again, this time using the custom user 
credentials:</p>
<div class="code-toolbar"><pre class="prefixed command language-bash"><code><ol><li data-prefix="$">mariadb -u <mark>example_user</mark> -p
</li></ol>
</code></pre><div class="toolbar"><div class="toolbar-item"><button>Copy</button></div></div></div>
<p>Note the <code>-p</code> flag in this command, which will prompt you for the password used when creating the <strong>example_user</strong> user. After logging in to the MariaDB console, confirm that you have access to the <strong>example_database</strong> database:</p>
<div class="code-toolbar"><pre class="prefixed custom_prefix language-bash"><code><ol><li data-prefix="MariaDB [(none)]&gt;">SHOW DATABASES<span class="token punctuation">;</span>
</li></ol>
</code></pre><div class="toolbar"><div class="toolbar-item"><button>Copy</button></div></div></div>
<p>This will give you the following output:</p>
<pre><code><div class="secondary-code-label" title="Output">Output</div>+--------------------+
| Database           |
+--------------------+
| <mark>example_database</mark>   |
| information_schema |
+--------------------+
2 rows in set (0.000 sec)
</code></pre>
<p>Next, create a test table named <strong>todo_list</strong>. From the MariaDB console, run the following statement:</p>
<div class="code-toolbar"><pre class="prefixed custom_prefix language-bash"><code><ol><li data-prefix="MariaDB [(none)]&gt;">CREATE TABLE <mark>example_database</mark>.<mark>todo_list</mark> <span class="token punctuation">(</span>
</li><li data-prefix="MariaDB [(none)]&gt;">	item_id INT AUTO_INCREMENT,
</li><li data-prefix="MariaDB [(none)]&gt;">	content VARCHAR<span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">)</span>,
</li><li data-prefix="MariaDB [(none)]&gt;">	PRIMARY KEY<span class="token punctuation">(</span>item_id<span class="token punctuation">)</span>
</li><li data-prefix="MariaDB [(none)]&gt;"><span class="token punctuation">)</span><span class="token punctuation">;</span>
</li></ol>
</code></pre><div class="toolbar"><div class="toolbar-item"><button>Copy</button></div></div></div>
<p>Insert a few rows of content in the test table. Repeat the next 
command a few times, using different values, to populate your test 
table:</p>
<div class="code-toolbar"><pre class="prefixed custom_prefix language-bash"><code><ol><li data-prefix="MariaDB [(none)]&gt;">INSERT INTO <mark>example_database</mark>.<mark>todo_list</mark> <span class="token punctuation">(</span>content<span class="token punctuation">)</span> VALUES <span class="token punctuation">(</span><span class="token string">"<mark>My first important item</mark>"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</li></ol>
</code></pre><div class="toolbar"><div class="toolbar-item"><button>Copy</button></div></div></div>
<p>To confirm that the data was successfully saved to your table, run:</p>
<div class="code-toolbar"><pre class="prefixed custom_prefix language-bash"><code><ol><li data-prefix="MariaDB [(none)]&gt;">SELECT * FROM <mark>example_database</mark>.<mark>todo_list</mark><span class="token punctuation">;</span>
</li></ol>
</code></pre><div class="toolbar"><div class="toolbar-item"><button>Copy</button></div></div></div>
<p>You will receive the following output:</p>
<pre><code><div class="secondary-code-label" title="Output">Output</div>+---------+--------------------------+
| item_id | content                  |
+---------+--------------------------+
|       1 | My first important item  |
|       2 | My second important item |
|       3 | My third important item  |
|       4 | and this one more thing  |
+---------+--------------------------+
4 rows in set (0.000 sec)
</code></pre>
<p>After confirming that you have valid data in your test table, you can exit the MariaDB console:</p>
<div class="code-toolbar"><pre class="prefixed custom_prefix language-bash"><code><ol><li data-prefix="MariaDB [(none)]&gt;"><span class="token builtin class-name">exit</span>
</li></ol>
</code></pre><div class="toolbar"><div class="toolbar-item"><button>Copy</button></div></div></div>
<p>Now you can create the PHP script that will connect to MariaDB and 
query for your content. Create a new PHP file in your custom web root 
directory using your preferred editor:</p>
<div class="code-toolbar"><pre class="prefixed command language-bash"><code><ol><li data-prefix="$"><span class="token function">nano</span> /var/www/<mark>your_domain</mark>/<mark>todo_list.php</mark>
</li></ol>
</code></pre><div class="toolbar"><div class="toolbar-item"><button>Copy</button></div></div></div>
<p>The following PHP script connects to the MariaDB database and queries for the content of the <strong>todo_list</strong> table, exhibiting the results in a list. If there’s a problem with the database connection, it will throw an exception.</p>
<p>Add this content into your <code>todo_list.php</code> script, remembering to replace the <code><mark>example_user</mark></code> and <code><mark>password</mark></code> values with your own:</p>
<div class="code-label" title="/var/www/your_domain/todo_list.php">/var/www/your_domain/todo_list.php</div>
<div class="code-toolbar"><pre class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>
<span class="token variable">$user</span> <span class="token operator">=</span> <span class="token string double-quoted-string">"<mark>example_user</mark>"</span><span class="token punctuation">;</span>
<span class="token variable">$password</span> <span class="token operator">=</span> <span class="token string double-quoted-string">"<mark>password</mark>"</span><span class="token punctuation">;</span>
<span class="token variable">$database</span> <span class="token operator">=</span> <span class="token string double-quoted-string">"<mark>example_database</mark>"</span><span class="token punctuation">;</span>
<span class="token variable">$table</span> <span class="token operator">=</span> <span class="token string double-quoted-string">"<mark>todo_list</mark>"</span><span class="token punctuation">;</span>

<span class="token keyword">try</span> <span class="token punctuation">{</span>
  <span class="token variable">$db</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PDO</span><span class="token punctuation">(</span><span class="token string double-quoted-string">"mysql:host=localhost;dbname=<span class="token interpolation"><span class="token variable">$database</span></span>"</span><span class="token punctuation">,</span> <span class="token variable">$user</span><span class="token punctuation">,</span> <span class="token variable">$password</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">echo</span> <span class="token string double-quoted-string">"&lt;h2&gt;TODO&lt;/h2&gt;&lt;ol&gt;"</span><span class="token punctuation">;</span> 
  <span class="token keyword">foreach</span><span class="token punctuation">(</span><span class="token variable">$db</span><span class="token operator">-&gt;</span><span class="token function">query</span><span class="token punctuation">(</span><span class="token string double-quoted-string">"SELECT content FROM <span class="token interpolation"><span class="token variable">$table</span></span>"</span><span class="token punctuation">)</span> <span class="token keyword">as</span> <span class="token variable">$row</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">echo</span> <span class="token string double-quoted-string">"&lt;li&gt;"</span> <span class="token operator">.</span> <span class="token variable">$row</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'content'</span><span class="token punctuation">]</span> <span class="token operator">.</span> <span class="token string double-quoted-string">"&lt;/li&gt;"</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">echo</span> <span class="token string double-quoted-string">"&lt;/ol&gt;"</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">PDOException</span> <span class="token variable">$e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">print</span> <span class="token string double-quoted-string">"Error!: "</span> <span class="token operator">.</span> <span class="token variable">$e</span><span class="token operator">-&gt;</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">.</span> <span class="token string double-quoted-string">"&lt;br/&gt;"</span><span class="token punctuation">;</span>
    <span class="token keyword">die</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</span></code></pre><div class="toolbar"><div class="toolbar-item"><button>Copy</button></div></div></div>
<p>Save and close the file when you’re done editing.</p>
<p>You can now access this page in your web browser by visiting the domain name or public IP address for your website, followed by <code>/todo_list.php</code>:</p>
<pre><code>http://<mark>your_domain</mark>/todo_list.php
</code></pre>
<p>This web page will reveal the content you’ve inserted in your test table to your visitor:</p>
<p><img src="How%20To%20Install%20Linux,%20Apache,%20MariaDB,%20PHP%20(LAMP)%20stack%20on%20Debian%2011%20DigitalOcean_fichiers/todo_list.png" alt="Example PHP todo list"></p>
<p>That means your PHP environment is ready to connect and interact with your MariaDB server.</p>
<h2 id="conclusion">Conclusion</h2>
<p>In this guide, you’ve built a flexible foundation for serving PHP 
websites and applications to your visitors, using Apache as a web server
 and MariaDB as the database system.</p>
<p>As an immediate next step, you should ensure the connections to your 
web server are secured, by serving them via HTTPS. In order to 
accomplish that, you can use <a href="https://www.digitalocean.com/community/tutorials/how-to-secure-apache-with-let-s-encrypt-on-debian-11">Let’s Encrypt</a>. You can also read our guide on <a href="https://www.digitalocean.com/community/tutorials/how-to-install-and-use-composer-on-debian-11">How to Install and Use Composer</a> for dependency and package management in PHP.</p>
</div></div></div><div style="display:none" class="ModalStyles__StyledModalBackground-sc-9tib0l-0 gxCVaG"></div><div class="ModalStyles__StyledModalWrapper-sc-9tib0l-1 cGLHqQ TechTalkRegistrationModalTemplate___StyledModal-sc-qfib80-0 ixXDuU" style="display:none"><div class="TechTalkRegistrationModalTemplateStyles__StyledModalContent-sc-134m86v-5 ieBdBc"><div class="TechTalkRegistrationModalTemplateStyles__StyledModalHeader-sc-134m86v-6 jyEzUD"><h5 class="HeadingStyles__StyledH5-sc-kkk1io-4 fFoMrJ TechTalkRegistrationModalTemplate___StyledHeading-sc-qfib80-1 gtqHfH">Join the Tech Talk</h5><a class="TechTalkRegistrationModalTemplateStyles__StyledCloseBtn-sc-134m86v-4 coEesX"></a></div><div class="TechTalkRegistrationModalTemplateStyles__StyledFormContainer-sc-134m86v-0 eaFKiH"><form class="TechTalkRegistrationModalTemplateStyles__StyledForm-sc-134m86v-1 hCDlWd"><div class="alert alert-success alert-hidden"><strong>Success!</strong> <!-- -->Thank you! Please check your email for further details.</div><p>Please complete your information!</p><input type="email" placeholder="user@digitalocean.com" required="" class="TechTalkRegistrationModalTemplateStyles__StyledFormInput-sc-134m86v-2 gvgvMm"><input type="text" placeholder="First Name" required="" class="TechTalkRegistrationModalTemplateStyles__StyledFormInput-sc-134m86v-2 gvgvMm"><input type="text" placeholder="Last Name" required="" class="TechTalkRegistrationModalTemplateStyles__StyledFormInput-sc-134m86v-2 gvgvMm"><input type="submit" value="Sign up" class="TechTalkRegistrationModalTemplateStyles__StyledSubmit-sc-134m86v-3 dXPcJm"></form></div></div></div></div></div></body></html>